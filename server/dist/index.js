require("@babel/polyfill"),require("source-map-support").install(),function(n,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("server",[],e):"object"===typeof exports?exports.server=e():n.server=e()}(this,(function(){return(()=>{var exports={id:826,ids:[826]};exports.modules={979:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "S": () => /* binding */ tokenExpires,\n/* harmony export */   "N": () => /* binding */ port\n/* harmony export */ });\nconst tokenExpires = 24 * 60 * 60 * 1000;\nconst port = 3100;\n\n//# sourceURL=webpack://server/./app/config/constant.js?')},456:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MYSQL_CONF\": () => /* binding */ MYSQL_CONF\n/* harmony export */ });\nconst env = \"production\"; // \u73af\u5883\u53c2\u6570\n\nlet MYSQL_CONF = null;\n\nif (env === 'development') {\n  MYSQL_CONF = {\n    host: '127.0.0.1',\n    user: 'root',\n    password: '123456',\n    port: '3306',\n    database: 'admin',\n    // charset:'utf8mb4',   //\u5b57\u7b26\u96c6\u4e00\u5b9a\u8981\u5199\uff0c\u5426\u5219\u8868\u60c5\u5305\u5b58\u50a8\u4e0d\u4e86\n    multipleStatements: true // \u662f\u5426\u8bb8\u4e00\u4e2aquery\u4e2d\u6709\u591a\u4e2aMySQL\u8bed\u53e5 \uff08\u9ed8\u8ba4\uff1afalse\uff09\n\n  };\n}\n\nif (env === 'production') {\n  MYSQL_CONF = {\n    host: '127.0.0.1',\n    user: 'root',\n    password: '123456',\n    port: '3306',\n    database: 'admin',\n    charset: 'utf8mb4',\n    //\u5b57\u7b26\u96c6\u4e00\u5b9a\u8981\u5199\uff0c\u5426\u5219\u8868\u60c5\u5305\u5b58\u50a8\u4e0d\u4e86\n    multipleStatements: true // \u662f\u5426\u8bb8\u4e00\u4e2aquery\u4e2d\u6709\u591a\u4e2aMySQL\u8bed\u53e5 \uff08\u9ed8\u8ba4\uff1afalse\uff09\n\n  };\n}\n\n\n\n//# sourceURL=webpack://server/./app/config/db.js?")},530:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "A": () => /* reexport safe */ _db_js__WEBPACK_IMPORTED_MODULE_0__.MYSQL_CONF,\n/* harmony export */   "setExpirationTime": () => /* reexport safe */ _token_js__WEBPACK_IMPORTED_MODULE_2__.v,\n/* harmony export */   "port": () => /* reexport safe */ _constant_js__WEBPACK_IMPORTED_MODULE_3__.N\n/* harmony export */ });\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(456);\n/* harmony import */ var _redis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(524);\n/* harmony import */ var _redis_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_redis_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony reexport (checked) */ if(__webpack_require__.o(_redis_js__WEBPACK_IMPORTED_MODULE_1__, "REDIS_CONF")) __webpack_require__.d(__webpack_exports__, { "REDIS_CONF": function() { return _redis_js__WEBPACK_IMPORTED_MODULE_1__.REDIS_CONF; } });\n/* harmony reexport (checked) */ if(__webpack_require__.o(_redis_js__WEBPACK_IMPORTED_MODULE_1__, "port")) __webpack_require__.d(__webpack_exports__, { "port": function() { return _redis_js__WEBPACK_IMPORTED_MODULE_1__.port; } });\n/* harmony reexport (checked) */ if(__webpack_require__.o(_redis_js__WEBPACK_IMPORTED_MODULE_1__, "setExpirationTime")) __webpack_require__.d(__webpack_exports__, { "setExpirationTime": function() { return _redis_js__WEBPACK_IMPORTED_MODULE_1__.setExpirationTime; } });\n/* harmony import */ var _token_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(56);\n/* harmony import */ var _constant_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(979);\n\n\n\n // export const MYSQL_CONF={\n//     name:123\n// }\n\n//# sourceURL=webpack://server/./app/config/index.js?')},524:module=>{eval("const env = \"production\"; // \u73af\u5883\u53c2\u6570\n\nlet REDIS_CONF = null;\n\nif (env === 'development') {\n  REDIS_CONF = {\n    host: '127.0.0.1',\n    //\u5730\u5740\n    port: '6378',\n    // \u7aef\u53e3\n    options: {\n      auth_pass: 123456 // \u5bc6\u7801\n\n    }\n  };\n}\n\nif (env === 'production') {\n  REDIS_CONF = {\n    host: '127.0.0.1',\n    port: '6378',\n    options: {\n      auth_pass: 123456\n    }\n  };\n}\n\nmodule.exports = {\n  REDIS_CONF\n};\n\n//# sourceURL=webpack://server/./app/config/redis.js?")},56:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "v": () => /* binding */ setExpirationTime\n/* harmony export */ });\n/* harmony import */ var _constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(979);\n\nconst setExpirationTime = () => {\n  const millisecond = new Date().getTime();\n  const expiresTime = new Date(millisecond + _constant__WEBPACK_IMPORTED_MODULE_0__/* .tokenExpires */ .S); //\u4e00\u5929\u540e\u8fc7\u671f\n\n  return expiresTime; // da.toUTCString(); //\u5c06 1598789234953\u8fd9\u79cd\u683c\u5f0f\u7684\u8f6c\u6362\u6210=> "Sat, 29 Aug 2020 12:06:33 GMT"\n};\n\n//# sourceURL=webpack://server/./app/config/token.js?')},502:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => /* binding */ app\n});\n\n// NAMESPACE OBJECT: ./app/module/user/graphql/schema/resolvers/Mutation/index.js\nvar Mutation_namespaceObject = {};\n__webpack_require__.r(Mutation_namespaceObject);\n__webpack_require__.d(Mutation_namespaceObject, {\n  "userAdd": () => userAdd\n});\n\n// NAMESPACE OBJECT: ./app/module/user/graphql/schema/resolvers/Query/index.js\nvar Query_namespaceObject = {};\n__webpack_require__.r(Query_namespaceObject);\n__webpack_require__.d(Query_namespaceObject, {\n  "userQuery": () => userQuery\n});\n\n// NAMESPACE OBJECT: ./app/module/user/graphql/schema/resolvers/Subscription/index.js\nvar Subscription_namespaceObject = {};\n__webpack_require__.r(Subscription_namespaceObject);\n__webpack_require__.d(Subscription_namespaceObject, {\n  "userTest": () => userTest\n});\n\n// NAMESPACE OBJECT: ./app/module/user/graphql/schema/resolvers/index.js\nvar resolvers_namespaceObject = {};\n__webpack_require__.r(resolvers_namespaceObject);\n__webpack_require__.d(resolvers_namespaceObject, {\n  "Mutation": () => Mutation_namespaceObject,\n  "Query": () => Query_namespaceObject,\n  "Subscription": () => Subscription_namespaceObject\n});\n\n// NAMESPACE OBJECT: ./app/module/user/graphql/schema/typeDefs/index.js\nvar schema_typeDefs_namespaceObject = {};\n__webpack_require__.r(schema_typeDefs_namespaceObject);\n__webpack_require__.d(schema_typeDefs_namespaceObject, {\n  "hello": () => hello\n});\n\n;// CONCATENATED MODULE: external "@babel/polyfill"\nconst polyfill_namespaceObject = require("@babel/polyfill");;\n;// CONCATENATED MODULE: external "koa"\nconst external_koa_namespaceObject = require("koa");;\nvar external_koa_default = /*#__PURE__*/__webpack_require__.n(external_koa_namespaceObject);\n;// CONCATENATED MODULE: ./app/utils/common.js\nconst common_promise = (fn = () => {}) => {\n  return new Promise((resolve, reject) => {\n    fn(resolve, reject);\n  });\n};\n\nconst common_merge = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n;// CONCATENATED MODULE: ./app/utils/index.js\n // export * from "./jwt";\n\n\n;// CONCATENATED MODULE: external "mysql"\nconst external_mysql_namespaceObject = require("mysql");;\nvar external_mysql_default = /*#__PURE__*/__webpack_require__.n(external_mysql_namespaceObject);\n// EXTERNAL MODULE: ./app/config/index.js\nvar config = __webpack_require__(530);\n;// CONCATENATED MODULE: ./app/db/mysql.js\n\n // \u521b\u5efa\u94fe\u63a5\u5bf9\u8c61\n\nconst connection = external_mysql_default().createConnection(config/* MYSQL_CONF */.A); // \u7edf\u4e00\u6267\u884c sql \u7684\u51fd\u6570\n\nconst mysql_exec = async sql => {\n  return await new Promise((resolve, reject) => {\n    console.log(\'sql=\', sql);\n    connection.query(sql, (err, result) => {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(result);\n    });\n  });\n};\n\n\n;// CONCATENATED MODULE: ./app/db/checkTable.js\n\n\nconst {\n  MYSQL_CONF\n} = __webpack_require__(456);\n\nclass CheckTable {\n  constructor() {\n    this.tables = [{\n      name: "user",\n      sql: `CREATE TABLE user(\n                    id INT(11) PRIMARY KEY  auto_increment primary key,\n                    name VARCHAR(25),\n                    phone VARCHAR(200),\n                    password VARCHAR(255)\n                ) AUTO_INCREMENT=1;\n           `\n    }, {\n      name: \'collect\',\n      sql: `\n         CREATE TABLE collect(\n              id INT(11) PRIMARY KEY,\n              name VARCHAR(25)  NOT NULL,\n              phone INT(11)  NOT NULL,\n              user_id INT(11)  NOT NULL,\n              FOREIGN KEY(user_id) REFERENCES user(id)\n         );\n         `\n    }, {\n      name: \'code\',\n      sql: `\n          CREATE TABLE code(\n            id INT(11) PRIMARY KEY,\n            name VARCHAR(25),\n            collect_id INT(11),\n            FOREIGN KEY(collect_id) REFERENCES collect(id),\n            user_id INT(11),\n            FOREIGN KEY(user_id) REFERENCES user(id)\n            );\n          `\n    }, {\n      name: \'role\',\n      sql: `\n        CREATE TABLE role(\n          id INT(11) PRIMARY KEY,\n          name VARCHAR(25),\n          root TINYINT(2)\n          );\n        `\n    }];\n    this.init();\n  }\n\n  init() {\n    this.tables.forEach(table => {\n      this.queryTable(table);\n    });\n  }\n\n  createTable() {}\n\n  async checkTable(data, table) {\n    if (data.length == 0) {\n      await mysql_exec(table.sql).then(data => {\n        console.log("\u521b\u5efa\u8868\u6210\u529f");\n      }).catch(error => {\n        console.log("\u521b\u5efa\u8868\u5931\u8d25=", error);\n      });\n    }\n  }\n\n  async queryTable(table) {\n    const sql = `\n           SELECT\n           TABLE_NAME FROM INFORMATION_SCHEMA.TABLES\n           WHERE TABLE_SCHEMA=\'${MYSQL_CONF.database}\' \n           AND TABLE_NAME= \'${table.name}\'`;\n    await mysql_exec(sql).then(async data => {\n      await this.checkTable(data, table);\n    }).catch(() => {});\n  }\n\n}\n\n\n;// CONCATENATED MODULE: ./app/db/user.js\n // \u6dfb\u52a0\u7528\u6237\n\nconst user_addUser = async ({\n  name,\n  phone,\n  password\n}) => {\n  const sql = `insert into user(name,phone,password) values(\'${name}\',\'${phone}\',md5(\'${password}\'));`;\n  return await mysql_exec(sql);\n}; //\u67e5\u8be2\u7528\u6237\n\n\nconst user_queryUser = async (andConditionData = {}, orConditionData = {}, sql) => {\n  const andKeys = Object.keys(andConditionData);\n  const orKeys = Object.keys(orConditionData);\n\n  if (sql) {\n    return await mysql_exec(sql);\n  }\n\n  sql = `select * from user where `;\n  andKeys.forEach(key => {\n    sql += key == "password" ? ` ${key}=md5(\'${andConditionData[key]}\') and` : ` ${key}=\'${andConditionData[key]}\' and`;\n  });\n  orKeys.forEach(key => {\n    sql += key == "password" ? ` ${key}=md5(\'${orConditionData[key]}\') or` : ` ${key}=\'${orConditionData[key]}\' or`;\n  });\n  sql = andKeys.length >= 1 && orKeys.length == 0 ? sql.substring(0, sql.length - 3) : orKeys.length >= 1 ? sql.substring(0, sql.length - 2) : sql;\n  return await mysql_exec(sql);\n}; //\u5220\u9664\u7528\u6237\n\n\nconst deleteUser = async id => {\n  const sql = `DELETE  FROM user  WHERE id=${id};`;\n  return await exec(sql);\n}; // \u5bfc\u51fa\n\n\n\n;// CONCATENATED MODULE: ./app/db/index.js\n\n\n\n;// CONCATENATED MODULE: external "redis"\nconst external_redis_namespaceObject = require("redis");;\nvar external_redis_default = /*#__PURE__*/__webpack_require__.n(external_redis_namespaceObject);\n;// CONCATENATED MODULE: ./app/redis/redis.js\n\n\n\n\nclass RedisClass {\n  constructor(port, url, options = {}) {\n    this.port = port;\n    this.url = url;\n    this.options = options;\n  } //\u8fde\u63a5\n\n\n  createRedisClient() {\n    this.redisClient = external_redis_default().createClient(this.port, this.url, this.options);\n  } // \u8fde\u63a5\n\n\n  connect(callback = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.on(\'connect\', () => {\n        callback();\n        resolve();\n      });\n    });\n  }\n\n  ready(callback = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.on(\'ready\', (err, res) => {\n        if (err) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  error(callback = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.on(\'error\', error => {\n        callback(error);\n        reject(error);\n      });\n    });\n  }\n\n  end(callback = () => {}) {\n    this.redisClient.on(\'end\', (err, res) => {\n      if (err) {\n        callback(error);\n        reject(error);\n      } else {\n        resolve(res);\n      }\n    });\n  }\n\n  set(key, value, callback = () => {}, options = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.set(key, value, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          let keys = Object.keys(options);\n          keys.forEach(_key => {\n            this.redisClient[_key](key, options[key]);\n          });\n          callback(res);\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  get(key, callback = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.get(key, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  del(key, callback = () => {}) {\n    return common_promise((resolve, reject) => {\n      this.redisClient.del(key, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  init() {\n    this.createRedisClient();\n    return this;\n  }\n\n}\n\nconst redis_Redis = new RedisClass(config.REDIS_CONF.port, config.REDIS_CONF.host, config.REDIS_CONF.options);\nredis_Redis.init();\nconst redis_redisClient = redis_Redis.redisClient;\n/* harmony default export */ const redis = ((/* unused pure expression or super */ null && (RedisClass)));\n;// CONCATENATED MODULE: external "jwt-redis"\nconst external_jwt_redis_namespaceObject = require("jwt-redis");;\n;// CONCATENATED MODULE: external "jsonwebtoken"\nconst external_jsonwebtoken_namespaceObject = require("jsonwebtoken");;\nvar external_jsonwebtoken_default = /*#__PURE__*/__webpack_require__.n(external_jsonwebtoken_namespaceObject);\n;// CONCATENATED MODULE: ./app/redis/jwt.js\n\n\n\n // const jwtr = new JWTR(redisClient);\n// const { sign, verify, destroy } = jwtr;\n\nconst {\n  sign,\n  verify,\n  decode\n} = (external_jsonwebtoken_default()); // var secret = "secret";\n// var jti = "test";\n// var payload = { jti };\n// \u7528\u7528\u6237id\u9a8c\u8bc1token\n\nconst jwt_userIdCheckToken = userId => {\n  return common_promise((resolve, reject) => {\n    redis_redisClient.keys(`userid_${userId}_*`, (error, value) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(value);\n      }\n    });\n  });\n}; //\u9a8c\u8bc1token\n\n\nconst jwt_checkToken = token => {\n  return promise((resolve, reject) => {\n    redisClient.keys(`userid_*_${token}`, (error, value) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(value);\n      }\n    });\n  });\n};\n\nconst jwt_createToken = async (userInfo = {}, payload = {}) => {\n  const {\n    id = ""\n  } = userInfo; //  \u4ea7\u751ftoken\n\n  payload = common_merge({\n    ctime: Date.now() //\u521b\u5efa\u65f6\u95f4\n\n  }, payload); //\u521b\u5efatoken\n\n  const token = await sign(payload, `${id}`, {\n    expiresIn: 0\n  }); //\u83b7\u53d6\u7528\u6237token key\n\n  const userIdTokens = await jwt_userIdCheckToken(id);\n\n  if (userIdTokens && userIdTokens.length >= 1) {\n    // \u5220\u9664\u591a\u4f59\u7684key\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\n    userIdTokens.forEach(async key => {\n      await redis_Redis.del(key);\n    });\n  } // \u91cd\u65b0\u8bbe\u7f6e redis \n\n\n  await redis_Redis.set(`userid_${id}_${token}`, JSON.stringify(userInfo));\n  return token;\n}; //\u9500\u6bc1token\n\n\nconst destroyToken = async tokenOrId => {\n  const userIdTokens = (await jwt_userIdCheckToken(tokenOrId)) || [];\n  const tokens = (await jwt_checkToken(tokenOrId)) || [];\n  merge(userIdTokens, tokens).forEach(async key => {\n    await Redis.del(key);\n  });\n  return "\u6210\u529f\u5220\u9664token";\n};\n\n\n;// CONCATENATED MODULE: ./app/redis/user.js\n\n\n // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n\nconst getUserIfo = async tokenOrId => {\n  const userIdTokens = (await userIdCheckToken(tokenOrId)) || [];\n  const tokens = (await checkToken(tokenOrId)) || [];\n  const data = await Redis.get(merge(userIdTokens, tokens)[0]);\n  return data;\n};\n\n\n;// CONCATENATED MODULE: ./app/redis/index.js\n\n\n\n\n;// CONCATENATED MODULE: external "graphql/type"\nconst type_namespaceObject = require("graphql/type");;\n;// CONCATENATED MODULE: external "graphql"\nconst external_graphql_namespaceObject = require("graphql");;\n;// CONCATENATED MODULE: external "http-errors"\nconst external_http_errors_namespaceObject = require("http-errors");;\n;// CONCATENATED MODULE: ./app/constant/httpCode.js\nconst graphqlError = {\n  code: 400,\n  msg: "\u8bf7\u6c42\u53c2\u6570\u6709\u8bef\uff0cgraphql\u8bed\u6cd5\u9519\u8bef"\n};\nconst httpCode_unsupported = {\n  //\u5bf9\u4e8e\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u548c\u6240\u8bf7\u6c42\u7684\u8d44\u6e90\uff0c\u8bf7\u6c42\u4e2d\u63d0\u4ea4\u7684\u5b9e\u4f53\u5e76\u4e0d\u662f\u670d\u52a1\u5668\u4e2d\u6240\u652f\u6301\u7684\u683c\u5f0f\uff0c\u56e0\u6b64\u8bf7\u6c42\u88ab\u62d2\u7edd\u3002\n  code: 415,\n  msg: "\u670d\u52a1\u5668\u5df2\u7ecf\u7406\u89e3\u8bf7\u6c42\uff0c\u4f46\u662f\u62d2\u7edd\u6267\u884c\u5b83"\n};\nconst httpCode_unauthorized = {\n  // \u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1. \u5982\u679c\u9a8c\u8bc1\u4e0d\u901a\u8fc7\u5219\u8fd4\u56de401\n  code: 401,\n  msg: "\u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1."\n};\n\n;// CONCATENATED MODULE: ./app/constant/index.js\n// \u6574\u4f53\u8f93\u51fa\n\n;// CONCATENATED MODULE: external "koa-router"\nconst external_koa_router_namespaceObject = require("koa-router");;\nvar external_koa_router_default = /*#__PURE__*/__webpack_require__.n(external_koa_router_namespaceObject);\n;// CONCATENATED MODULE: external "graphql-tools"\nconst external_graphql_tools_namespaceObject = require("graphql-tools");;\n;// CONCATENATED MODULE: ./app/service/user.js\n\n\n\n\n\n\nclass Service {\n  static list(page) {\n    console.log(\'page=\', page);\n    const dataList = {\n      list: [{\n        time: \'2019-7-10\',\n        id: 1,\n        title: \'this is news 1\',\n        url: \'/news/1\'\n      }, {\n        time: \'2019-8-10\',\n        id: 2,\n        title: \'this is news 2\',\n        url: \'/news/2\'\n      }]\n    };\n    return dataList.list[page] || {};\n  } //\u6ce8\u518c\u7528\u6237\n\n\n  static async add(ctx, next, parameter) {\n    const {\n      username: name,\n      phone,\n      password\n    } = parameter;\n    /*\n    1 \u67e5\u8be2\u7528\u6237\u540d\u662f\u5426\u88ab\u6ce8\u518c\u8fc7\uff0c\n    2 \u67e5\u8be2\u624b\u673a\u53f7\u7801\u662f\u5426\u88ab\u6ce8\u518c\u8fc7\n    3 \u5982\u679c\u90fd\u6ca1\u6709\u88ab\u6ce8\u518c\u90a3\u4e48\u5c31\u53ef\u4ee5\u6ce8\u518c\n    */\n\n    let userInfo = await this.queryUser({\n      name\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (userInfo && userInfo.id) {\n      return {\n        status: 1\n      };\n    }\n\n    userInfo = await this.queryUser({\n      phone\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (userInfo && userInfo.id) {\n      return {\n        status: 2\n      };\n    }\n\n    const data = await user_addUser({\n      name,\n      phone,\n      password\n    });\n\n    if (data) {\n      return {\n        status: 3\n      };\n    }\n  } // \u7f16\u8f91\u7528\u6237\n\n\n  static async edit(ctx, next, parameter) {} // \u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7528\u6237\n\n\n  static async queryUser(...ags) {\n    const userData = await user_queryUser(...ags);\n    return userData;\n  } // \u767b\u5f55\n\n\n  static async login(ctx, next, parameter = {}) {\n    const {\n      username: name,\n      phone,\n      password\n    } = parameter;\n    const {\n      request,\n      response,\n      cookies\n    } = ctx;\n    /*\n    1.\u5148\u67e5\u8be2\u7528\u6237\u540d\u662f\u5426\u6b63\u786e\uff0c\n    2.\u67e5\u8be2\u7528\u6237\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e\n    3.\u521b\u5efatoken,\u5b58\u50a8\u5230redis\u4e2d\n    4.\u628a\u7528\u6237\u4fe1\u606f\u6302\u8f7dresponse\u4e2d\n    */\n\n    let userInfo = await this.queryUser({\n      name\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (!userInfo) {\n      return {\n        status: 1\n      };\n    }\n\n    userInfo = await this.queryUser({\n      password\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (!userInfo) {\n      return {\n        status: 2\n      };\n    }\n\n    userInfo = await user_queryUser({\n      name,\n      password\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n    /*\n    \u521b\u5efa createToken  \n    */\n\n    const token = await jwt_createToken(userInfo);\n    delete userInfo.password;\n    ctx.response.userInfo = userInfo;\n    console.log(\'setExpirationTime=\', (0,config.setExpirationTime)()); // console.log(\'token=\', token);\n    // console.log(\'request=\', request);\n    // console.log(\'session=\', session);\n\n    console.log(\'cookies===\', cookies); // cookie.expires = false;\n    // cookie.maxAge = 5 * 60 * 1000;\n\n    cookies.set(\'token\', token, {\n      httpOnly: false,\n      overwrite: false // expires: setExpirationTime(),\n\n    });\n\n    if (userInfo) {\n      //\u767b\u5f55\u6210\u529f\n      return {\n        status: 3,\n        token,\n        userInfo\n      };\n    }\n  }\n\n}\n\n/* harmony default export */ const user = (Service);\n;// CONCATENATED MODULE: ./app/controller/user.js\n\n\n\n\nclass Controller {\n  static async add(ctx, next) {\n    // ctx.set("Content-Type", "application/json")\n    const parameter = ctx.request.body; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n\n    const data = await user.add(ctx, next, parameter);\n\n    const getMessage = data => {\n      const {\n        status\n      } = data;\n      const message = {\n        1: () => common_merge(httpCode_unsupported, {\n          msg: "\u8be5\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7,\u8bf7\u91cd\u65b0\u8f93\u5165\u7528\u6237\u540d"\n        }),\n        2: () => common_merge(httpCode_unsupported, {\n          msg: "\u8be5\u624b\u673a\u53f7\u7801\u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7,\u8bf7\u91cd\u65b0\u8f93\u5165\u624b\u673a\u53f7\u7801"\n        }),\n        3: () => ({\n          code: 200,\n          msg: "\u6ce8\u518c\u6210\u529f"\n        })\n      };\n      return message[status]();\n    };\n\n    ctx.response.body = getMessage(data);\n  }\n\n  static edit(ctx, next) {\n    ctx.set("Content-Type", "application/json");\n    var page = ctx.params.page; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n    // const data = userService.list(page);\n    // ctx.response.body = "d";\n  }\n\n  static async login(ctx, next) {\n    // ctx.set("Content-Type", "application/json")\n    var parameter = ctx.request.body; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n\n    const data = await user.login(ctx, next, parameter);\n\n    const getMessage = data => {\n      const {\n        status,\n        token,\n        userInfo\n      } = data;\n      const message = {\n        1: () => common_merge(httpCode_unauthorized, {\n          msg: "\u7528\u6237\u540d\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u7528\u6237\u540d"\n        }),\n        2: () => common_merge(httpCode_unauthorized, {\n          msg: "\u5bc6\u7801\u9519\u8bef\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801"\n        }),\n        3: () => ({\n          code: 200,\n          msg: "\u767b\u5f55\u6210\u529f",\n          data: {\n            token,\n            userInfo\n          }\n        })\n      };\n      return message[status]();\n    };\n\n    ctx.response.body = getMessage(data);\n  }\n\n}\n\n/* harmony default export */ const controller_user = (Controller);\n;// CONCATENATED MODULE: ./app/routes/user.js\n\n // koa \u8def\u7531\u4e2d\u95f4\u4ef6\n\nclass Route {\n  constructor(app, router) {\n    this.app = app;\n    this.router = router;\n    this.init();\n  }\n\n  createRouter() {\n    this.secondaryRoute = new (external_koa_router_default())({\n      prefix: "/user" // \u7ed9\u8def\u7531\u7edf\u4e00\u52a0\u4e2a\u524d\u7f00\uff1a\n\n    });\n    return this.secondaryRoute;\n  }\n\n  middleware() {// \u5904\u7406404\n    // this.app.use(\'/user\',function* (next) {\n    //     try {\n    //         yield* next;\n    //     } catch (e) {\n    //         this.status = 500;\n    //         this.body = \'500\';\n    //     }\n    //     if (parseInt(this.status) === 404) {\n    //         this.body = \'404\';\n    //     }\n    // });\n  } // \u6dfb\u52a0\u8def\u7531\n\n\n  addRouters() {\n    // \u6dfb\u52a0\u8def\u7531\n    this.registered();\n    this.login();\n    this.router.use(this.secondaryRoute.routes()); //\u6302\u8f7d\u4e8c\u7ea7\u8def\u7531\n  }\n\n  init() {\n    // \u521b\u5efa\u8def\u7531\n    this.createRouter(); // \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n\n    this.middleware(); // \u6dfb\u52a0\u8def\u7531\n\n    this.addRouters();\n  }\n\n  registered() {\n    // \u6dfb\u52a0 \u63a5\u53e3\n    this.secondaryRoute.post("/register", controller_user.add);\n  }\n\n  login() {\n    // \u6dfb\u52a0 \u63a5\u53e3\n    this.secondaryRoute.post("/login", controller_user.login);\n  }\n\n}\n\n/* harmony default export */ const routes_user = (Route);\n;// CONCATENATED MODULE: external "koa-bodyparser"\nconst external_koa_bodyparser_namespaceObject = require("koa-bodyparser");;\nvar external_koa_bodyparser_default = /*#__PURE__*/__webpack_require__.n(external_koa_bodyparser_namespaceObject);\n;// CONCATENATED MODULE: external "koa2-cors"\nconst external_koa2_cors_namespaceObject = require("koa2-cors");;\nvar external_koa2_cors_default = /*#__PURE__*/__webpack_require__.n(external_koa2_cors_namespaceObject);\n;// CONCATENATED MODULE: external "koa-cookie"\nconst external_koa_cookie_namespaceObject = require("koa-cookie");;\n;// CONCATENATED MODULE: ./app/middleware/common.js\n\n\n\n\nconst common = (app, router) => {\n  // \u5904\u7406404\n  // app.use(function* (next) {\n  //     try {\n  //         yield* next;\n  //     } catch (e) {\n  //         this.status = 500;\n  //         this.body = \'500\';\n  //     }\n  //     if (parseInt(this.status) === 404) {\n  //         this.body = \'404\';\n  //     }\n  // });\n  //\u5904\u7406500\n  // router.get(\'/\', function* (next) {\n  //     throw new Error(\'500\');\n  // });\n  // \u6dfb\u52a0\u83b7\u53d6\u53c2\u6570\u4e2d\u95f4\u4ef6\n  app.use(external_koa_bodyparser_default()()); // \u6dfb\u52a0 cookie\n  // app.use(cookie());\n  // // \u6dfb\u52a0\u8de8\u57df\n  // app.use(async (ctx, next)=> {\n  //   console.log(ctx.request.headers)\n  // // // if( req.headers.origin.toLowerCase() == "http://www.zhangpeiyue.com"\n  // // //     || req.headers.origin.toLowerCase() =="http://127.0.0.1" ) {\n  // // //     //\u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\u7684\u57df\u540d\uff0c*\u4ee3\u8868\u5141\u8bb8\u4efb\u610f\u57df\u540d\u8de8\u57df\n  // // //     res.header("Access-Control-Allow-Origin", req.headers.origin);\n  // // // }\n  //     // ctx.set(\'Access-Control-Allow-Origin\', \'*\');\n  //      //\u8bbe\u7f6e\u5141\u8bb8\u8de8\u57df\u7684\u57df\u540d\uff0c*\u4ee3\u8868\u5141\u8bb8\u4efb\u610f\u57df\u540d\u8de8\u57df\n  //      ctx.set("Access-Control-Allow-Origin","*");\n  // //\u5141\u8bb8\u7684header\u7c7b\u578b\n  // ctx.set("Access-Control-Allow-Headers","content-type");\n  // //\u8de8\u57df\u5141\u8bb8\u7684\u8bf7\u6c42\u65b9\u5f0f \n  // ctx.set("Access-Control-Allow-Methods","DELETE,PUT,POST,GET,OPTIONS");\n  // //     ctx.set(\'Access-Control-Allow-Headers\', \'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild\');\n  // //     ctx.set(\'Access-Control-Allow-Methods\', \'PUT, POST, GET, DELETE, OPTIONS\');\n  //      await next();\n  // //     if (ctx.method == \'OPTIONS\') {\n  // //       ctx.body = 200; \n  // //     } else {\n  // //       await next();\n  // //     }\n  //   });\n  // \u8de8\u57df\n\n  app.use(external_koa2_cors_default()());\n};\n\n/* harmony default export */ const middleware_common = (common);\n;// CONCATENATED MODULE: ./app/middleware/index.js\n\n\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/resolvers/Mutation/index.js\nconst userAdd = () => {};\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/resolvers/Query/index.js\nconst userQuery = () => {};\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/resolvers/Subscription/index.js\nconst userTest = () => {};\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/resolvers/index.js\n\n\n //\u4f1a\u5458\u6a21\u5757\n\n\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/typeDefs/typeDefs.js\nconst hello = `\ntype Query {\n  hello: String\n}\n`;\n\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/typeDefs/index.js\n\n\n;// CONCATENATED MODULE: ./app/module/user/graphql/schema/index.js\n\n //\u4f1a\u5458\u6a21\u5757\n\n/* harmony default export */ const schema = ({\n  resolvers: resolvers_namespaceObject,\n  typeDefs: schema_typeDefs_namespaceObject\n});\n;// CONCATENATED MODULE: ./app/module/user/config/db.js\nconst env = "production"; // \u73af\u5883\u53c2\u6570\n\nlet db_MYSQL_CONF = null;\n\nif (env === \'development\') {\n  db_MYSQL_CONF = {\n    host: \'127.0.0.1\',\n    user: \'root\',\n    password: \'123456\',\n    port: \'3306\',\n    database: \'admin\',\n    // charset:\'utf8mb4\',   //\u5b57\u7b26\u96c6\u4e00\u5b9a\u8981\u5199\uff0c\u5426\u5219\u8868\u60c5\u5305\u5b58\u50a8\u4e0d\u4e86\n    multipleStatements: true // \u662f\u5426\u8bb8\u4e00\u4e2aquery\u4e2d\u6709\u591a\u4e2aMySQL\u8bed\u53e5 \uff08\u9ed8\u8ba4\uff1afalse\uff09\n\n  };\n}\n\nif (env === \'production\') {\n  db_MYSQL_CONF = {\n    host: \'127.0.0.1\',\n    user: \'root\',\n    password: \'123456\',\n    port: \'3306\',\n    database: \'admin\',\n    charset: \'utf8mb4\',\n    //\u5b57\u7b26\u96c6\u4e00\u5b9a\u8981\u5199\uff0c\u5426\u5219\u8868\u60c5\u5305\u5b58\u50a8\u4e0d\u4e86\n    multipleStatements: true // \u662f\u5426\u8bb8\u4e00\u4e2aquery\u4e2d\u6709\u591a\u4e2aMySQL\u8bed\u53e5 \uff08\u9ed8\u8ba4\uff1afalse\uff09\n\n  };\n}\n\n\n// EXTERNAL MODULE: ./app/module/user/config/redis.js\nvar config_redis = __webpack_require__(396);\n;// CONCATENATED MODULE: ./app/module/user/config/index.js\n\n\n\n // export const MYSQL_CONF={\n//     name:123\n// }\n;// CONCATENATED MODULE: ./app/module/user/db/mysql.js\n\n // \u521b\u5efa\u94fe\u63a5\u5bf9\u8c61\n\nconst mysql_connection = external_mysql_default().createConnection(db_MYSQL_CONF); // \u7edf\u4e00\u6267\u884c sql \u7684\u51fd\u6570\n\nconst db_mysql_exec = async sql => {\n  return await new Promise((resolve, reject) => {\n    console.log(\'sql=\', sql);\n    mysql_connection.query(sql, (err, result) => {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(result);\n    });\n  });\n};\n\n\n;// CONCATENATED MODULE: ./app/module/user/db/user.js\n // \u6dfb\u52a0\u7528\u6237\n\nconst db_user_addUser = async ({\n  name,\n  phone,\n  password\n}) => {\n  const sql = `insert into user(name,phone,password) values(\'${name}\',\'${phone}\',md5(\'${password}\'));`;\n  return await exec(sql);\n}; //\u67e5\u8be2\u7528\u6237\n\n\nconst db_user_queryUser = async (andConditionData = {}, orConditionData = {}, sql) => {\n  const andKeys = Object.keys(andConditionData);\n  const orKeys = Object.keys(orConditionData);\n\n  if (sql) {\n    return await exec(sql);\n  }\n\n  sql = `select * from user where `;\n  andKeys.forEach(key => {\n    sql += key == "password" ? ` ${key}=md5(\'${andConditionData[key]}\') and` : ` ${key}=\'${andConditionData[key]}\' and`;\n  });\n  orKeys.forEach(key => {\n    sql += key == "password" ? ` ${key}=md5(\'${orConditionData[key]}\') or` : ` ${key}=\'${orConditionData[key]}\' or`;\n  });\n  sql = andKeys.length >= 1 && orKeys.length == 0 ? sql.substring(0, sql.length - 3) : orKeys.length >= 1 ? sql.substring(0, sql.length - 2) : sql;\n  return await exec(sql);\n}; //\u5220\u9664\u7528\u6237\n\n\nconst user_deleteUser = async id => {\n  const sql = `DELETE  FROM user  WHERE id=${id};`;\n  return await exec(sql);\n}; // \u5bfc\u51fa\n\n\n\n;// CONCATENATED MODULE: ./app/module/user/constant/httpCode.js\nconst httpCode_graphqlError = {\n  code: 400,\n  msg: "\u8bf7\u6c42\u53c2\u6570\u6709\u8bef\uff0cgraphql\u8bed\u6cd5\u9519\u8bef"\n};\nconst constant_httpCode_unsupported = {\n  //\u5bf9\u4e8e\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u548c\u6240\u8bf7\u6c42\u7684\u8d44\u6e90\uff0c\u8bf7\u6c42\u4e2d\u63d0\u4ea4\u7684\u5b9e\u4f53\u5e76\u4e0d\u662f\u670d\u52a1\u5668\u4e2d\u6240\u652f\u6301\u7684\u683c\u5f0f\uff0c\u56e0\u6b64\u8bf7\u6c42\u88ab\u62d2\u7edd\u3002\n  code: 415,\n  msg: "\u670d\u52a1\u5668\u5df2\u7ecf\u7406\u89e3\u8bf7\u6c42\uff0c\u4f46\u662f\u62d2\u7edd\u6267\u884c\u5b83"\n};\nconst constant_httpCode_unauthorized = {\n  // \u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1. \u5982\u679c\u9a8c\u8bc1\u4e0d\u901a\u8fc7\u5219\u8fd4\u56de401\n  code: 401,\n  msg: "\u5f53\u524d\u8bf7\u6c42\u9700\u8981\u7528\u6237\u9a8c\u8bc1."\n};\n\n;// CONCATENATED MODULE: ./app/module/user/constant/index.js\n// \u6574\u4f53\u8f93\u51fa\n\n;// CONCATENATED MODULE: ./app/module/user/utils/common.js\nconst utils_common_promise = (fn = () => {}) => {\n  return new Promise((resolve, reject) => {\n    fn(resolve, reject);\n  });\n};\n\nconst utils_common_merge = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n;// CONCATENATED MODULE: ./app/module/user/utils/index.js\n // export * from "./jwt";\n\n\n;// CONCATENATED MODULE: ./app/module/user/redis/redis.js\n\n\n\n\nclass redis_RedisClass {\n  constructor(port, url, options = {}) {\n    this.port = port;\n    this.url = url;\n    this.options = options;\n  } //\u8fde\u63a5\n\n\n  createRedisClient() {\n    this.redisClient = external_redis_default().createClient(this.port, this.url, this.options);\n  } // \u8fde\u63a5\n\n\n  connect(callback = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.on(\'connect\', () => {\n        callback();\n        resolve();\n      });\n    });\n  }\n\n  ready(callback = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.on(\'ready\', (err, res) => {\n        if (err) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  error(callback = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.on(\'error\', error => {\n        callback(error);\n        reject(error);\n      });\n    });\n  }\n\n  end(callback = () => {}) {\n    this.redisClient.on(\'end\', (err, res) => {\n      if (err) {\n        callback(error);\n        reject(error);\n      } else {\n        resolve(res);\n      }\n    });\n  }\n\n  set(key, value, callback = () => {}, options = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.set(key, value, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          let keys = Object.keys(options);\n          keys.forEach(_key => {\n            this.redisClient[_key](key, options[key]);\n          });\n          callback(res);\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  get(key, callback = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.get(key, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  del(key, callback = () => {}) {\n    return utils_common_promise((resolve, reject) => {\n      this.redisClient.del(key, (error, res) => {\n        if (error) {\n          callback(error);\n          reject(error);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  init() {\n    this.createRedisClient();\n    return this;\n  }\n\n}\n\nconst redis_redis_Redis = new redis_RedisClass(config_redis.REDIS_CONF.port, config_redis.REDIS_CONF.host, config_redis.REDIS_CONF.options);\nredis_redis_Redis.init();\nconst redis_redis_redisClient = redis_redis_Redis.redisClient;\n/* harmony default export */ const redis_redis = ((/* unused pure expression or super */ null && (redis_RedisClass)));\n;// CONCATENATED MODULE: ./app/module/user/redis/jwt.js\n\n\n\n // const jwtr = new JWTR(redisClient);\n// const { sign, verify, destroy } = jwtr;\n\nconst {\n  sign: jwt_sign,\n  verify: jwt_verify,\n  decode: jwt_decode\n} = (external_jsonwebtoken_default()); // var secret = "secret";\n// var jti = "test";\n// var payload = { jti };\n// \u7528\u7528\u6237id\u9a8c\u8bc1token\n\nconst redis_jwt_userIdCheckToken = userId => {\n  return promise((resolve, reject) => {\n    redisClient.keys(`userid_${userId}_*`, (error, value) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(value);\n      }\n    });\n  });\n}; //\u9a8c\u8bc1token\n\n\nconst redis_jwt_checkToken = token => {\n  return promise((resolve, reject) => {\n    redisClient.keys(`userid_*_${token}`, (error, value) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(value);\n      }\n    });\n  });\n};\n\nconst redis_jwt_createToken = async (userInfo = {}, payload = {}) => {\n  const {\n    id = ""\n  } = userInfo; //  \u4ea7\u751ftoken\n\n  payload = merge({\n    ctime: Date.now() //\u521b\u5efa\u65f6\u95f4\n\n  }, payload); //\u521b\u5efatoken\n\n  const token = await jwt_sign(payload, `${id}`, {\n    expiresIn: 0\n  }); //\u83b7\u53d6\u7528\u6237token key\n\n  const userIdTokens = await redis_jwt_userIdCheckToken(id);\n\n  if (userIdTokens && userIdTokens.length >= 1) {\n    // \u5220\u9664\u591a\u4f59\u7684key\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\n    userIdTokens.forEach(async key => {\n      await Redis.del(key);\n    });\n  } // \u91cd\u65b0\u8bbe\u7f6e redis \n\n\n  await Redis.set(`userid_${id}_${token}`, JSON.stringify(userInfo));\n  return token;\n}; //\u9500\u6bc1token\n\n\nconst jwt_destroyToken = async tokenOrId => {\n  const userIdTokens = (await redis_jwt_userIdCheckToken(tokenOrId)) || [];\n  const tokens = (await redis_jwt_checkToken(tokenOrId)) || [];\n  merge(userIdTokens, tokens).forEach(async key => {\n    await Redis.del(key);\n  });\n  return "\u6210\u529f\u5220\u9664token";\n};\n\n\n;// CONCATENATED MODULE: ./app/module/user/redis/user.js\n\n\n // \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n\nconst user_getUserIfo = async tokenOrId => {\n  const userIdTokens = (await userIdCheckToken(tokenOrId)) || [];\n  const tokens = (await checkToken(tokenOrId)) || [];\n  const data = await Redis.get(merge(userIdTokens, tokens)[0]);\n  return data;\n};\n\n\n;// CONCATENATED MODULE: ./app/module/user/redis/index.js\n\n\n\n\n;// CONCATENATED MODULE: ./app/module/user/service/index.js\n\n\n\n\n\n\nclass service_Service {\n  static list(page) {\n    console.log(\'page=\', page);\n    const dataList = {\n      list: [{\n        time: \'2019-7-10\',\n        id: 1,\n        title: \'this is news 1\',\n        url: \'/news/1\'\n      }, {\n        time: \'2019-8-10\',\n        id: 2,\n        title: \'this is news 2\',\n        url: \'/news/2\'\n      }]\n    };\n    return dataList.list[page] || {};\n  } //\u6ce8\u518c\u7528\u6237\n\n\n  static async add(ctx, next, parameter) {\n    const {\n      username: name,\n      phone,\n      password\n    } = parameter;\n    /*\n    1 \u67e5\u8be2\u7528\u6237\u540d\u662f\u5426\u88ab\u6ce8\u518c\u8fc7\uff0c\n    2 \u67e5\u8be2\u624b\u673a\u53f7\u7801\u662f\u5426\u88ab\u6ce8\u518c\u8fc7\n    3 \u5982\u679c\u90fd\u6ca1\u6709\u88ab\u6ce8\u518c\u90a3\u4e48\u5c31\u53ef\u4ee5\u6ce8\u518c\n    */\n\n    let userInfo = await this.queryUser({\n      name\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (userInfo && userInfo.id) {\n      return {\n        status: 1\n      };\n    }\n\n    userInfo = await this.queryUser({\n      phone\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (userInfo && userInfo.id) {\n      return {\n        status: 2\n      };\n    }\n\n    const data = await addUser({\n      name,\n      phone,\n      password\n    });\n\n    if (data) {\n      return {\n        status: 3\n      };\n    }\n  } // \u7f16\u8f91\u7528\u6237\n\n\n  static async edit(ctx, next, parameter) {} // \u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7528\u6237\n\n\n  static async queryUser(...ags) {\n    const userData = await queryUser(...ags);\n    return userData;\n  } // \u767b\u5f55\n\n\n  static async login(ctx, next, parameter = {}) {\n    const {\n      username: name,\n      phone,\n      password\n    } = parameter;\n    const {\n      request,\n      response,\n      cookies\n    } = ctx;\n    /*\n    1.\u5148\u67e5\u8be2\u7528\u6237\u540d\u662f\u5426\u6b63\u786e\uff0c\n    2.\u67e5\u8be2\u7528\u6237\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e\n    3.\u521b\u5efatoken,\u5b58\u50a8\u5230redis\u4e2d\n    4.\u628a\u7528\u6237\u4fe1\u606f\u6302\u8f7dresponse\u4e2d\n    */\n\n    let userInfo = await this.queryUser({\n      name\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (!userInfo) {\n      return {\n        status: 1\n      };\n    }\n\n    userInfo = await this.queryUser({\n      password\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n\n    if (!userInfo) {\n      return {\n        status: 2\n      };\n    }\n\n    userInfo = await queryUser({\n      name,\n      password\n    });\n    userInfo = userInfo.length >= 1 ? userInfo[0] : null;\n    /*\n    \u521b\u5efa createToken  \n    */\n\n    const token = await createToken(userInfo);\n    delete userInfo.password;\n    ctx.response.userInfo = userInfo;\n    console.log(\'setExpirationTime=\', setExpirationTime()); // console.log(\'token=\', token);\n    // console.log(\'request=\', request);\n    // console.log(\'session=\', session);\n\n    console.log(\'cookies===\', cookies); // cookie.expires = false;\n    // cookie.maxAge = 5 * 60 * 1000;\n\n    cookies.set(\'token\', token, {\n      httpOnly: false,\n      overwrite: false // expires: setExpirationTime(),\n\n    });\n\n    if (userInfo) {\n      //\u767b\u5f55\u6210\u529f\n      return {\n        status: 3,\n        token,\n        userInfo\n      };\n    }\n  }\n\n}\n\n/* harmony default export */ const service = ({}); // Service;\n;// CONCATENATED MODULE: ./app/module/user/controller/index.js\n\n\n\n\nclass controller_Controller {\n  static async add(ctx, next) {\n    // ctx.set("Content-Type", "application/json")\n    const parameter = ctx.request.body; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n\n    const data = await userService.add(ctx, next, parameter);\n\n    const getMessage = data => {\n      const {\n        status\n      } = data;\n      const message = {\n        1: () => merge(unsupported, {\n          msg: "\u8be5\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7,\u8bf7\u91cd\u65b0\u8f93\u5165\u7528\u6237\u540d"\n        }),\n        2: () => merge(unsupported, {\n          msg: "\u8be5\u624b\u673a\u53f7\u7801\u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7,\u8bf7\u91cd\u65b0\u8f93\u5165\u624b\u673a\u53f7\u7801"\n        }),\n        3: () => ({\n          code: 200,\n          msg: "\u6ce8\u518c\u6210\u529f"\n        })\n      };\n      return message[status]();\n    };\n\n    ctx.response.body = getMessage(data);\n  }\n\n  static edit(ctx, next) {\n    ctx.set("Content-Type", "application/json");\n    var page = ctx.params.page; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n    // const data = userService.list(page);\n    // ctx.response.body = "d";\n  }\n\n  static async login(ctx, next) {\n    // ctx.set("Content-Type", "application/json")\n    var parameter = ctx.request.body; // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570\n    //\u6dfb\u52a0service\n\n    const data = await userService.login(ctx, next, parameter);\n\n    const getMessage = data => {\n      const {\n        status,\n        token,\n        userInfo\n      } = data;\n      const message = {\n        1: () => merge(unauthorized, {\n          msg: "\u7528\u6237\u540d\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u7528\u6237\u540d"\n        }),\n        2: () => merge(unauthorized, {\n          msg: "\u5bc6\u7801\u9519\u8bef\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801"\n        }),\n        3: () => ({\n          code: 200,\n          msg: "\u767b\u5f55\u6210\u529f",\n          data: {\n            token,\n            userInfo\n          }\n        })\n      };\n      return message[status]();\n    };\n\n    ctx.response.body = getMessage(data);\n  }\n\n}\n\n/* harmony default export */ const controller = ((/* unused pure expression or super */ null && (controller_Controller)));\n;// CONCATENATED MODULE: ./app/module/user/router/index.js\n\n // koa \u8def\u7531\u4e2d\u95f4\u4ef6\n\nclass router {\n  constructor(app, rootRouter) {\n    this.app = app;\n    this.router = rootRouter;\n    this.init();\n  }\n\n  createRouter() {\n    this.secondaryRoute = new (external_koa_router_default())({\n      prefix: "/user" // \u7ed9\u8def\u7531\u7edf\u4e00\u52a0\u4e2a\u524d\u7f00\uff1a\n\n    });\n    return this.secondaryRoute;\n  }\n\n  middleware() {// \u5904\u7406404\n    // this.app.use(\'/user\',function* (next) {\n    //     try {\n    //         yield* next;\n    //     } catch (e) {\n    //         this.status = 500;\n    //         this.body = \'500\';\n    //     }\n    //     if (parseInt(this.status) === 404) {\n    //         this.body = \'404\';\n    //     }\n    // });\n  } // \u6dfb\u52a0\u8def\u7531\n\n\n  addRouters() {\n    // \u6dfb\u52a0\u8def\u7531\n    this.registered();\n    this.login();\n    this.router.use(this.secondaryRoute.routes()); //\u6302\u8f7d\u4e8c\u7ea7\u8def\u7531\n  }\n\n  init() {\n    // \u521b\u5efa\u8def\u7531\n    this.createRouter(); // \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n\n    this.middleware(); // \u6dfb\u52a0\u8def\u7531\n\n    this.addRouters();\n  }\n\n  registered() {// \u6dfb\u52a0 \u63a5\u53e3\n    // this.secondaryRoute.post("/register", controller.add);\n  }\n\n  login() {// \u6dfb\u52a0 \u63a5\u53e3\n    // this.secondaryRoute.post("/login", controller.login);\n  }\n\n}\n\n/* harmony default export */ const user_router = (router);\n;// CONCATENATED MODULE: ./app/module/user/index.js\n\n\n/* harmony default export */ const module_user = ({\n  schema: schema,\n  router: user_router\n});\n;// CONCATENATED MODULE: ./app/module/index.js\n// \u4e0d\u652f\u6301 import { default as user } from "./user"; \u5bfc\u51fa\n\n\n;// CONCATENATED MODULE: ./app/routes/index.js\n\n // import schema from \'../graphql/schema\';\n\n\n\n\n\n // import Home from "./home";\n\n\n // import { user } from "../graphql/schema"; \n// import  userResolvers,  * as userSchema  from \'../graphql/schema/user/index.js\';\n\n\nconsole.log(\'module========\', module_user); // console.log(\'userResolvers===\',userResolvers)\n// console.log(\'userSchema===\',userSchema)\n//  Construct a schema, using GraphQL schema language\n\nconst typeDefs = `\n  type Query {\n    hello: String\n  }\n`; // Provide resolver functions for your schema fields\n\nconst resolvers = {\n  Query: {\n    hello: () => "Hello world!"\n  }\n};\n\nclass routes_Route {\n  constructor(app) {\n    this.app = app; // this.router = router;\n\n    this.init();\n  }\n\n  createRouter() {\n    this.router = new (external_koa_router_default())({\n      prefix: "/api" // \u7ed9\u8def\u7531\u7edf\u4e00\u52a0\u4e2a\u524d\u7f00\uff1a\n\n    });\n  } // \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n\n\n  middleware() {\n    // this.app.use(\n    //   webpackDevMiddleware(compiler, {\n    //     publicPath: config.output.publicPath,\n    //   })\n    // );\n    // \u6dfb\u52a0 404 500 \u4e2d\u95f4\u4ef6\n    middleware_common(this.app, this.router);\n  }\n\n  checkToken() {\n    this.router.use(async (ctx, next) => {\n      // console.log(\'ctx.request==\',ctx.request.header)\n      const {\n        request: {\n          header\n        },\n        cookies\n      } = ctx;\n      let token = cookies.get("token") || header.token;\n      console.log("token=", token); //   ctx.cookies.set(\'cid\',\'comedy\',{\n      //     domain:\'localhost\',     //\u5199cookie\u6240\u5728\u7684\u57df\u540d\n      //     path:\'/index\',          //\u5199cookie\u6240\u5728\u7684\u8def\u5f84\n      //     maxAge:60*1000,         //\u5199cookie\u6709\u6548\u65f6\u957f\n      //     expires:7,\n      //     httpOnly:false,\n      //     overwrite:false\n      // })\n      // ctx.body = \'cookie is ok\'\n\n      console.log("\u4e2d\u95f4\u952e1\u5f00\u59cb");\n      await next();\n      console.log("\u4e2d\u95f4\u952e1\u7ed3\u675f");\n    });\n  } // \u6dfb\u52a0\u8def\u7531\n\n\n  addRouters() {\n    new routes_user(this.app, this.router); // new Home(this.app,router);\n\n    console.log("checkToken====");\n    this.checkToken(); // \u67e5\u8be2\n\n    this.router.get("/data", async (ctx, next) => {\n      const {\n        query: {\n          query = "",\n          variables = {}\n        },\n        response,\n        request\n      } = ctx;\n      const {\n        body: {// mutation = \'\', variables = {}\n        }\n      } = request; // const { query = \'\', variables = {} } = ctx.query;\n      // const { response } = ctx;\n      // console.log(\'schema==\',schema)\n\n      console.log("query==", query);\n      console.log("variables==", variables);\n      console.log("token=====", ctx.cookies.get("token")); // ctx.response.body = {\n      //   name:\'123\'\n      // }\n\n      const baseSchema = `\n                    schema {\n                        query: Query\n                        mutation: Mutation\n                    }\n              `;\n      const schema = (0,external_graphql_tools_namespaceObject.makeExecutableSchema)({\n        typeDefs: [// baseSchema,\n        typeDefs //   baseSchema,\n        //   userType,\n        //   songType,\n        //   playlistType\n        ],\n        resolvers: resolvers //  merge(\n        //   {},\n        //   userResolvers,\n        //   songResolvers,\n        //   playlistResolvers\n        // )\n\n      });\n      await (0,external_graphql_namespaceObject.graphql)(schema, query, {\n        ctx,\n        next\n      }, variables).then(data => {\n        const {\n          errors\n        } = data;\n        console.log("data=", data);\n        console.log("stringify data=", JSON.stringify(data));\n\n        if (errors) {\n          response.body = common_merge(graphqlError, {\n            errors\n          });\n        } else {\n          console.log("get==", data); // ctx.response.body = {\n          //   name:\'123\'\n          // }\n\n          response.body = data; // JSON.stringify(data);\n        }\n      }).catch(error => {\n        console.log("error==", error);\n      });\n    }); // //\u53d8\u5f02\n    // this.router.post(\'/data\', async (ctx, next) => {\n    //     const {\n    //         // query: { query = \'\', variables = {} },\n    //         response,\n    //         request,\n    //     } = ctx;\n    //     const {\n    //         body: { mutation = \'\', variables = {} },\n    //     } = request;\n    //     await graphql(schema, mutation, { ctx, next }, variables)\n    //         .then((data) => {\n    //             const { errors } = data;\n    //             if (errors) {\n    //                 response.body = merge(graphqlError, {\n    //                     errors,\n    //                 });\n    //             } else {\n    //                 console.log(\'post==\', data);\n    //                 response.body = data;\n    //             }\n    //         })\n    //         .catch((error) => {\n    //             console.log(\'error==\', error);\n    //         });\n    // });\n    //  const server = new ApolloServer({ typeDefs, resolvers });\n    //  this.router.get(\'/data\',server.getMiddleware())\n    // \u6302\u8f7d\u8def\u7531\u4e2d\u95f4\u4ef6\n\n    this.app.use(this.router.routes()).use(this.router.allowedMethods()); // this.app.use(this.router.routes()).use(this.router.allowedMethods());\n  }\n\n  init() {\n    // \u6dfb\u52a0\u4e2d\u95f4\u4ef6\n    this.middleware(); //\u521b\u5efa\u8def\u7531\n\n    this.createRouter(); // \u6dfb\u52a0\u8def\u7531\n\n    this.addRouters();\n  }\n\n}\n\n/* harmony default export */ const routes = (routes_Route);\n;// CONCATENATED MODULE: external "kill-port"\nconst external_kill_port_namespaceObject = require("kill-port");;\n;// CONCATENATED MODULE: ./app/index.js\n\n\n\n\n\n\n\n\nconsole.log(3111123231111123123233112323223123);\n\nclass App {\n  constructor() {\n    this.app = new (external_koa_default())();\n    this.init();\n  }\n\n  async init() {\n    // redis\u94fe\u63a5\n    await this.connectRedis(); // \u6570\u636e\u5e93\u8fde\u63a5\n\n    await this.connectSql(); //\u52a0\u8f7d\u8def\u7531\n\n    this.addRoute(); // \u8bbe\u7f6e\u76d1\u542c\u7aef\u53e3\n\n    this.listen();\n  }\n\n  async connectRedis() {\n    await common_promise((reslove, reject) => {\n      redis_Redis.connect(() => {\n        console.log("Redis \u94fe\u63a5\u6210\u529f");\n        reslove();\n      });\n      redis_Redis.error(() => {\n        console.log("Redis \u94fe\u63a5\u9519\u8bef");\n        reject();\n      });\n    });\n  }\n\n  async connectSql() {\n    await common_promise((reslove, reject) => {\n      connection.connect(err => {\n        if (err) {\n          console.log("\u6570\u636e\u5e93\u8fde\u5931\u8d25");\n          reject();\n          throw err;\n        }\n\n        new CheckTable();\n        console.log("mysql\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f");\n        reslove();\n      });\n    });\n  }\n\n  addRoute() {\n    // \u5bfc\u5165\u8def\u7531\n    new routes(this.app);\n  }\n\n  listen() {\n    // try {\n    //   kill(port, "tcp");\n    // } catch (e) {}\n    this.server = this.app.listen(config.port, () => {\n      console.log(`\u670d\u52a1\u5668\u542f\u52a8\u6210\u529f:http://localhost:${config.port}/`);\n    });\n    this.server.setTimeout(5 * 60 * 1000);\n  }\n\n}\n\n/* harmony default export */ const app = (new App());\n\n//# sourceURL=webpack://server/./app/index.js_+_57_modules?')},396:module=>{eval("const env = \"production\"; // \u73af\u5883\u53c2\u6570\n\nlet REDIS_CONF = null;\n\nif (env === 'development') {\n  REDIS_CONF = {\n    host: '127.0.0.1',\n    //\u5730\u5740\n    port: '6378',\n    // \u7aef\u53e3\n    options: {\n      auth_pass: 123456 // \u5bc6\u7801\n\n    }\n  };\n}\n\nif (env === 'production') {\n  REDIS_CONF = {\n    host: '127.0.0.1',\n    port: '6378',\n    options: {\n      auth_pass: 123456\n    }\n  };\n}\n\nmodule.exports = {\n  REDIS_CONF\n};\n\n//# sourceURL=webpack://server/./app/module/user/config/redis.js?")},374:(module,__unused_webpack_exports,__webpack_require__)=>{eval('/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function (updatedModules, renewedModules) {\n\tvar unacceptedModules = updatedModules.filter(function (moduleId) {\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\n\t});\n\tvar log = __webpack_require__(919);\n\n\tif (unacceptedModules.length > 0) {\n\t\tlog(\n\t\t\t"warning",\n\t\t\t"[HMR] The following modules couldn\'t be hot updated: (They would need a full reload!)"\n\t\t);\n\t\tunacceptedModules.forEach(function (moduleId) {\n\t\t\tlog("warning", "[HMR]  - " + moduleId);\n\t\t});\n\t}\n\n\tif (!renewedModules || renewedModules.length === 0) {\n\t\tlog("info", "[HMR] Nothing hot updated.");\n\t} else {\n\t\tlog("info", "[HMR] Updated modules:");\n\t\trenewedModules.forEach(function (moduleId) {\n\t\t\tif (typeof moduleId === "string" && moduleId.indexOf("!") !== -1) {\n\t\t\t\tvar parts = moduleId.split("!");\n\t\t\t\tlog.groupCollapsed("info", "[HMR]  - " + parts.pop());\n\t\t\t\tlog("info", "[HMR]  - " + moduleId);\n\t\t\t\tlog.groupEnd("info");\n\t\t\t} else {\n\t\t\t\tlog("info", "[HMR]  - " + moduleId);\n\t\t\t}\n\t\t});\n\t\tvar numberIds = renewedModules.every(function (moduleId) {\n\t\t\treturn typeof moduleId === "number";\n\t\t});\n\t\tif (numberIds)\n\t\t\tlog(\n\t\t\t\t"info",\n\t\t\t\t\'[HMR] Consider using the optimization.moduleIds: "named" for module names.\'\n\t\t\t);\n\t}\n};\n\n\n//# sourceURL=webpack://server/./node_modules/webpack/hot/log-apply-result.js?')},919:module=>{eval('var logLevel = "info";\n\nfunction dummy() {}\n\nfunction shouldLog(level) {\n\tvar shouldLog =\n\t\t(logLevel === "info" && level === "info") ||\n\t\t(["info", "warning"].indexOf(logLevel) >= 0 && level === "warning") ||\n\t\t(["info", "warning", "error"].indexOf(logLevel) >= 0 && level === "error");\n\treturn shouldLog;\n}\n\nfunction logGroup(logFn) {\n\treturn function (level, msg) {\n\t\tif (shouldLog(level)) {\n\t\t\tlogFn(msg);\n\t\t}\n\t};\n}\n\nmodule.exports = function (level, msg) {\n\tif (shouldLog(level)) {\n\t\tif (level === "info") {\n\t\t\tconsole.log(msg);\n\t\t} else if (level === "warning") {\n\t\t\tconsole.warn(msg);\n\t\t} else if (level === "error") {\n\t\t\tconsole.error(msg);\n\t\t}\n\t}\n};\n\n/* eslint-disable node/no-unsupported-features/node-builtins */\nvar group = console.group || dummy;\nvar groupCollapsed = console.groupCollapsed || dummy;\nvar groupEnd = console.groupEnd || dummy;\n/* eslint-enable node/no-unsupported-features/node-builtins */\n\nmodule.exports.group = logGroup(group);\n\nmodule.exports.groupCollapsed = logGroup(groupCollapsed);\n\nmodule.exports.groupEnd = logGroup(groupEnd);\n\nmodule.exports.setLogLevel = function (level) {\n\tlogLevel = level;\n};\n\nmodule.exports.formatError = function (err) {\n\tvar message = err.message;\n\tvar stack = err.stack;\n\tif (!stack) {\n\t\treturn message;\n\t} else if (stack.indexOf(message) < 0) {\n\t\treturn message + "\\n" + stack;\n\t} else {\n\t\treturn stack;\n\t}\n};\n\n\n//# sourceURL=webpack://server/./node_modules/webpack/hot/log.js?')},615:(module,__unused_webpack_exports,__webpack_require__)=>{eval('var __resourceQuery = "?1000";\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n/*globals __resourceQuery */\nif (true) {\n\tvar hotPollInterval = +__resourceQuery.substr(1) || 0;\n\tvar log = __webpack_require__(919);\n\n\tvar checkForUpdate = function checkForUpdate(fromUpdate) {\n\t\tif (module.hot.status() === "idle") {\n\t\t\tmodule.hot\n\t\t\t\t.check(true)\n\t\t\t\t.then(function (updatedModules) {\n\t\t\t\t\tif (!updatedModules) {\n\t\t\t\t\t\tif (fromUpdate) log("info", "[HMR] Update applied.");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t__webpack_require__(374)(updatedModules, updatedModules);\n\t\t\t\t\tcheckForUpdate(true);\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tvar status = module.hot.status();\n\t\t\t\t\tif (["abort", "fail"].indexOf(status) >= 0) {\n\t\t\t\t\t\tlog("warning", "[HMR] Cannot apply update.");\n\t\t\t\t\t\tlog("warning", "[HMR] " + log.formatError(err));\n\t\t\t\t\t\tlog("warning", "[HMR] You need to restart the application!");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlog("warning", "[HMR] Update failed: " + log.formatError(err));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\tsetInterval(checkForUpdate, hotPollInterval);\n} else {}\n\n\n//# sourceURL=webpack://server/./node_modules/webpack/hot/poll.js?')}};var __webpack_require__=require("./runtime~index.js");return __webpack_require__.C(exports),__webpack_require__.X([],615),__webpack_require__.X([],502)})()}));